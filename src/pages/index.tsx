import type { GetStaticProps } from 'next';
import Head from 'next/head';
import Link from 'next/link';

import Button from '../components/Button';
import FeedbackSlide from '../components/FeedbackSlide';
import PrimaryBannerSlide from '../components/PrimaryBannerSlide';

import api from '../services/api';

import styles from './home.module.scss';

type Type = {
  type: string;
};

type ImageProps = {
  formats: {
    thumbnail: {
      url: string;
    };
  };
};

type Feedback = {
  id: number;
  name: string;
  feedback: string;
  image: ImageProps;
};

type HomeProps = {
  types: Type[];
  feedback: Feedback[];
};

export default function Home({ types, feedback }: HomeProps) {
  return (
    <>
      <Head>
        <title>Início | CezarModz</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <div className={`container ${styles.bannerContainer}`}>
        <PrimaryBannerSlide />
      </div>
      <section className="container">
        <main className={`${styles.choseProductBox}`}>
          <h1> Produtos </h1>
          <p> Contas e serviços para PS4 e XBOX </p>
          {types.map((type) => (
            <Link key={type.type} href="/">
              <a>
                <Button text={type.type} />
              </a>
            </Link>
          ))}
        </main>
      </section>
      <section className="container">
        <FeedbackSlide feedback={feedback} />
      </section>
      <footer className={`${styles.footerContainer}`}>
        <div className={styles.footerContent}>
          <div className={styles.left}>
            <h2>Contato via E-Mail</h2>
            <a href="mailto:contato@cezarmodz.com.br">Contato comercial</a>
            <a href="mailto:suporte@cezarmodz.com.br">Suporte ao cliente</a>
          </div>
          <div className={styles.right}>
            <h2>Redes Sociais</h2>
            <a href="mailto:contato@cezarmodz.com.br">Instagram</a>
            <a href="mailto:suporte@cezarmodz.com.br">facebook</a>
          </div>
        </div>
        <div className={styles.footerPolicity}>
          <p>Todos os direitos reservados</p>
          <a href="">Desenvolvedor</a>
        </div>
      </footer>
    </>
  );
}

export const getStaticProps: GetStaticProps = async () => {
  const types = await api.get('/tipos');
  const feedback = await api.get('/depoimentos');

  return {
    props: {
      types: types.data,
      feedback: feedback.data,
    },
    revalidate: 60 * 60 * 24,
  };
};
